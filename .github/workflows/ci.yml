name: CI Workflow

on:
  push:
    branches:
      - '**' #allows the workflow to run on each push to any branch

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      -name: Checkout Code
        uses: actions/checkout@v3

      -name: setup conda
        uses: conda-incubator/setup-miniconda@v3
        with:
          installer-url: https://github.com/conda-forge/miniforge/releases/download/4.8.3-2/Miniforge-pypy3-4.8.3-2-Linux-x86_64.sh
          allow-softlinks: true
          show-channel-urls: true
        run: |
          conda info
          conda list
          conda config --show-sources
          conda config --show

      -name: create conda environment
        run: |
          conda env create -f env.yml
          conda run -n mle-dev

      -name: Install Flake8
        run: conda install -n mle-dev flake8

      -name: enforcing code standards
        run: flake8 nonstandardcode.py

      -name: run python code
        run: python nonstandardcode.py



